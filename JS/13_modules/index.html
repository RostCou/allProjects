<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>TODO</title>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <script type="module">
      import { startApi } from "./todo-app/get-api.js";

      const arrayTypeStorage = {
        local: "Перейти на серверное хранилище",
        server: "Перейти на локальное хранилище",
      };

      let localStorageData = localStorage.getItem("MyStorageType");

      if (!localStorageData) {
        localStorage.setItem("MyStorageType", "local");
        localStorageData = "local";
      }

      document.getElementById("btn-switch").innerText =
        arrayTypeStorage[localStorageData];

      document.getElementById("btn-switch").addEventListener("click", () => {
        if (localStorageData === "local") {
          localStorage.setItem("MyStorageType", "server");
        } else {
          localStorage.setItem("MyStorageType", "local");
        }
        location.reload();
      });

      startApi("Мои дела", "Я", localStorageData);
    </script>
  </head>

  <body class="pt-2">
    <div class="container mb-3 d-flex justify-content-between">
      <nav class="nav">
        <a class="nav-link" href="index.html"> Мои дела </a>
        <a class="nav-link" href="mom.html"> Дела мамы </a>
        <a class="nav-link" href="dad.html"> Дела папы </a>
      </nav>
      <button class="btn btn-primary" id="btn-switch"></button>
    </div>
    <div class="container" id="todo-app"></div>
  </body>
</html>
